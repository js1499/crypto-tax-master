# Crypto Tax Calculator - Environment Variables
# Copy this file to .env and fill in your values

# ============================================
# REQUIRED - Must be set for app to work
# ============================================

# Database Connection (PostgreSQL)
# Format: postgresql://user:password@host:port/database
# Examples:
#   - Local: postgresql://postgres:password@localhost:5432/crypto_tax_calculator
#   - Supabase (IMPORTANT: Use connection pooler for serverless/Vercel):
#     postgresql://postgres:[PASSWORD]@aws-0-us-east-1.pooler.supabase.com:6543/postgres
#     Get this from: Supabase Dashboard → Settings → Database → Connection string → Transaction mode
#   - Supabase Direct (NOT recommended for Vercel):
#     postgresql://postgres:[PASSWORD]@db.xxx.supabase.co:5432/postgres
#   - Neon: postgresql://[USER]:[PASSWORD]@[HOST]/[DATABASE]
#   - Vercel Postgres: Automatically set when you create a Vercel Postgres database
#
# IMPORTANT FOR SUPABASE + VERCEL:
# - Use port 6543 (connection pooler) NOT 5432 (direct connection)
# - Direct connections (5432) are blocked for serverless functions
# - Get the pooler URL from Supabase Dashboard → Settings → Database
DATABASE_URL=postgresql://user:password@localhost:5432/crypto_tax_calculator

# NextAuth Configuration
# Your application URL (change for production)
NEXTAUTH_URL=http://localhost:3000

# NextAuth Secret (generate with: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))")
# This is used to encrypt session tokens
NEXTAUTH_SECRET=your-nextauth-secret-here-generate-a-random-32-byte-base64-string

# Encryption Key for API Keys (generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))")
# Used to encrypt exchange API keys stored in database
# IMPORTANT: Now uses AES-256-GCM (production-ready!)
ENCRYPTION_KEY=your-32-byte-hex-encryption-key-here

# ============================================
# OPTIONAL - App works without these
# ============================================

# Redis Connection (for caching)
# Format: redis://password@host:port or redis://host:port
# Examples:
#   - Local: redis://localhost:6379
#   - Upstash: rediss://default:password@host:port
#   - Redis Cloud: redis://default:password@host:port
# Leave empty if not using Redis (app will work without it)
REDIS_URL=redis://localhost:6379

# ============================================
# OPTIONAL - Third-Party Services
# ============================================

# Google OAuth (for Google sign-in)
# Get from: https://console.cloud.google.com/apis/credentials
# 1. Create OAuth 2.0 Client ID
# 2. Add authorized redirect URI: http://localhost:3000/api/auth/callback/google (for local)
# 3. Add authorized redirect URI: https://yourdomain.com/api/auth/callback/google (for production)
GOOGLE_CLIENT_ID=your_google_client_id
GOOGLE_CLIENT_SECRET=your_google_client_secret

# Coinbase OAuth (for Coinbase integration)
# Get from: https://www.coinbase.com/oauth/applications
COINBASE_CLIENT_ID=your_coinbase_client_id
COINBASE_CLIENT_SECRET=your_coinbase_client_secret
COINBASE_REDIRECT_URI=http://localhost:3000/api/auth/coinbase/callback

# Blockchain APIs (for fetching on-chain transactions)
# Etherscan: https://etherscan.io/myapikey
ETHERSCAN_API_KEY=your_etherscan_api_key

# Solscan: https://solscan.io (Pro API key recommended for production)
SOLSCAN_API_KEY=your_solscan_api_key

# CoinGecko API (for price data)
# Get from: https://www.coingecko.com/en/api
# Free tier: 10-50 calls/minute
COINGECKO_API_KEY=your_coingecko_api_key

# Sentry (for error tracking)
# Get from: https://sentry.io
# Leave empty if not using Sentry
SENTRY_DSN=your_sentry_dsn
SENTRY_ORG=your_sentry_org
SENTRY_PROJECT=your_sentry_project

# ============================================
# PRODUCTION ONLY
# ============================================

# Node Environment (automatically set by hosting provider)
# Development: NODE_ENV=development
# Production: NODE_ENV=production
# NODE_ENV=production

# ============================================
# NOTES
# ============================================

# 1. Never commit .env file to version control
# 2. Generate strong secrets for NEXTAUTH_SECRET and ENCRYPTION_KEY
# 3. Use different values for development and production
# 4. For production, use managed services (Supabase, Neon, Upstash, etc.)
# 5. API key encryption now uses AES-256-GCM (production-ready!)
